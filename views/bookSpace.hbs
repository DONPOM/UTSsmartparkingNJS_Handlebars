<h1>{{title}}</h1>

<div id="bookWrapper">
    <h1>Make a Booking</h1>
    <div id="searchController">
        <form method="get" action="/getSpaces">
            <div class="dayWrapper">
                <input type="submit" name="day" id="todayButton" class="buttons" value="Today">
                <input type="submit" name="day" id="tomorrowButton" class="buttons" value="Tomorrow">
                <input type="submit" name="day" id="thirdDayButton" class="buttons" value="">
                <input type="hidden" id="selectedDay" value="<% out.println(day); %>">
            </div>
        </form>

    </div>


    <div id="bookSelection" class="bookSelection">
        <table>
            <tr>
                <td>Space Number:</td>
                <td id="spaceNumber"></td>
            </tr>
            <tr>
                <td>Floor:</td>
                <td>1</td>
            </tr>
            <tr>
                <td>Date:</td>
                <td id="date"></td>
            </tr>
            <tr>
                <td>From:</td>
                <td id="timeFrom"></td>
            </tr>
            <tr>
                <td>Length:</td>
                <td>
                    <select id="hours" name="hours">

                    </select>
                    hours
                </td>
            </tr>
            <tr><td><button type="submit" class="buttons">Confirm</button></td></tr>
        </table>
    </div>


    <div id="resultsWrapper">
        <br>
    <table>
        {{# each spaces }}
            <tr>
                <td>Space ID: {{ this.spaceID }} </td>
                <td>Space Type: {{this.spaceType }} </td>
                {{# each item in this.timeSlots }}
                    <td><div class="{{this}}"></div></td>
                {{/each }}
            </tr>
        {{/each }}

    </table>
    </div>
</div>

<script>

    var thirdDay = new Date();

    thirdDay.setDate(thirdDay.getDate() + 2);
    var days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    document.getElementById("thirdDayButton").value = days[thirdDay.getDay()];

    var day = document.getElementById("selectedDay").value;
    if (day.trim() == "Today") {
        setCurrentButton("todayButton");
    }
    else if (day.trim() == "Tomorrow") {
        setCurrentButton("tomorrowButton");
    }
    else {
        setCurrentButton("thirdDayButton");
    }

    function setDay(selectedDay) {
        document.getElementById("selectedDay").value = selectedDay;
    }

    function setCurrentButton(currDay) {
        document.getElementById(currDay).style.border = "solid #0f4beb";
        document.getElementById(currDay).style.background = "#ffffff";
        document.getElementById(currDay).style.color = "#0f4beb";
    }

    function bookIn(space, hour, count) {

        document.getElementById("bookSelection").style.display = "block";

        var date = new Date();
        var dateFormatted = date.getDate() + "/" + (date.getMonth()+1).toString() + "/" + date.getFullYear().toString();

        document.getElementById("spaceNumber").innerHTML = space;
        document.getElementById("date").innerHTML = dateFormatted;
        document.getElementById("timeFrom").innerHTML = hour+":00";

        var hourOptions = document.getElementById("hours");

        for (itr = 0; itr < hourOptions.options.length; itr++) {
            hourOptions.options[itr] = null;
        }

        for (var i = 1; i <= count; i++){
            var option = document.createElement("option");
            option.text = i.toString();
            hourOptions.add(option);
        }

    }

</script>